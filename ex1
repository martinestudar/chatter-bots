import re
import random
from difflib import get_close_matches

class ChatbotSustentabilidade:
    def __init__(self):
        self.base_conhecimento = {
            # Perguntas sobre aquecimento global
            "o que √© aquecimento global": "O aquecimento global √© o aumento da temperatura m√©dia da Terra devido ao aumento dos gases do efeito estufa na atmosfera, principalmente causado por atividades humanas.",
            "quais as causas do aquecimento global": "As principais causas s√£o: queima de combust√≠veis f√≥sseis, desmatamento, atividades industriais, agricultura intensiva e transporte. Essas atividades liberam gases como CO2, metano e √≥xido nitroso.",
            "como combater o aquecimento global": "Podemos combater atrav√©s de: uso de energias renov√°veis, redu√ß√£o do consumo, reflorestamento, transporte sustent√°vel, reciclagem e mudan√ßas no estilo de vida.",
            
            # Perguntas sobre reciclagem
            "o que √© reciclagem": "Reciclagem √© o processo de transformar res√≠duos em novos produtos, reduzindo o consumo de mat√©ria-prima virgem e diminuindo o impacto ambiental.",
            "quais materiais podem ser reciclados": "Papel, papel√£o, vidro, pl√°stico, metal, alum√≠nio, pilhas, baterias, eletr√¥nicos, √≥leo de cozinha e materiais org√¢nicos podem ser reciclados.",
            "como separar o lixo corretamente": "Separe em: azul (papel), verde (vidro), amarelo (metal), vermelho (pl√°stico), marrom (org√¢nico) e cinza (n√£o recicl√°vel). Lave os materiais antes do descarte.",
            "onde descartar pilhas e baterias": "Leve para pontos de coleta em supermercados, farm√°cias, assist√™ncias t√©cnicas ou postos de coleta municipal. Nunca descarte no lixo comum.",
            
            # Perguntas sobre energia sustent√°vel
            "o que s√£o energias renov√°veis": "S√£o fontes de energia que se renovam naturalmente, como solar, e√≥lica, hidrel√©trica, biomassa e geot√©rmica. S√£o alternativas limpas aos combust√≠veis f√≥sseis.",
            "vantagens da energia solar": "√â limpa, renov√°vel, reduz a conta de luz, tem baixa manuten√ß√£o, valoriza o im√≥vel e contribui para a redu√ß√£o das emiss√µes de CO2.",
            "como economizar energia em casa": "Use l√¢mpadas LED, desligue aparelhos da tomada, aproveite luz natural, use eletrodom√©sticos eficientes e ajuste a temperatura do ar-condicionado.",
            
            # Perguntas sobre √°gua
            "como economizar √°gua": "Tome banhos mais curtos, feche a torneira ao escovar dentes, conserte vazamentos, reutilize √°gua da chuva e use a m√°quina de lavar com carga completa.",
            "import√¢ncia da √°gua": "A √°gua √© essencial para a vida, agricultura, ind√∫stria e ecossistemas. √â um recurso finito que deve ser preservado para as futuras gera√ß√µes.",
            "o que √© polui√ß√£o da √°gua": "√â a contamina√ß√£o de corpos d'√°gua por subst√¢ncias nocivas como esgotos, produtos qu√≠micos, pl√°sticos e res√≠duos industriais, prejudicando a vida aqu√°tica e humana.",
            
            # Perguntas sobre desmatamento
            "o que causa o desmatamento": "Agricultura, pecu√°ria, extra√ß√£o de madeira, urbaniza√ß√£o, minera√ß√£o e constru√ß√£o de infraestruturas s√£o as principais causas do desmatamento.",
            "consequ√™ncias do desmatamento": "Perda de biodiversidade, mudan√ßas clim√°ticas, eros√£o do solo, altera√ß√£o do ciclo da √°gua e destrui√ß√£o de habitats naturais.",
            "como ajudar a preservar as florestas": "Reduza o consumo de papel, compre produtos certificados, apoie ONGs ambientais, plante √°rvores e conscientize outras pessoas.",
            
            # Perguntas sobre polui√ß√£o do ar
            "principais poluentes do ar": "Mon√≥xido de carbono, di√≥xido de enxofre, √≥xidos de nitrog√™nio, material particulado, oz√¥nio e compostos org√¢nicos vol√°teis s√£o os principais poluentes.",
            "como reduzir a polui√ß√£o do ar": "Use transporte p√∫blico, caminhe, ande de bicicleta, mantenha o carro em dia, use energias limpas e evite queimadas.",
            "efeitos da polui√ß√£o do ar": "Causa problemas respirat√≥rios, cardiovasculares, c√¢ncer, prejudica a agricultura e contribui para o aquecimento global.",
            
            # Perguntas sobre consumo sustent√°vel
            "o que √© consumo sustent√°vel": "√â adquirir produtos e servi√ßos considerando seu impacto ambiental, social e econ√¥mico, priorizando qualidade, durabilidade e responsabilidade.",
            "como consumir de forma sustent√°vel": "Compre apenas o necess√°rio, escolha produtos dur√°veis, prefira empresas respons√°veis, reutilize itens e evite o desperd√≠cio.",
            "o que s√£o produtos ecol√≥gicos": "S√£o produtos fabricados com materiais sustent√°veis, processos limpos, menor impacto ambiental e que podem ser reciclados ou biodegradados.",
            
            # Perguntas sobre biodiversidade
            "o que √© biodiversidade": "√â a variedade de vida na Terra, incluindo diversidade de esp√©cies, genes e ecossistemas. √â fundamental para o equil√≠brio ambiental.",
            "por que preservar a biodiversidade": "Mant√©m o equil√≠brio ecol√≥gico, fornece recursos naturais, contribui para medicina, agricultura e oferece servi√ßos ambientais essenciais.",
            "como proteger a biodiversidade": "Preserve habitats naturais, evite esp√©cies invasoras, apoie conserva√ß√£o, reduza polui√ß√£o e conscientize sobre a import√¢ncia da natureza.",
            
            # Perguntas sobre mudan√ßas clim√°ticas
            "o que s√£o mudan√ßas clim√°ticas": "S√£o altera√ß√µes de longo prazo nos padr√µes clim√°ticos globais, causadas principalmente por atividades humanas que aumentam gases do efeito estufa.",
            "sinais das mudan√ßas clim√°ticas": "Aumento de temperatura, degelo das calotas polares, eleva√ß√£o do n√≠vel do mar, eventos extremos e altera√ß√µes nos padr√µes de chuva.",
            "como se adaptar √†s mudan√ßas clim√°ticas": "Desenvolva agricultura resistente, melhore infraestrutura, preserve recursos h√≠dricos, proteja √°reas costeiras e prepare-se para eventos extremos.",
            
            # Perguntas sobre transporte sustent√°vel
            "o que √© transporte sustent√°vel": "S√£o meios de transporte que causam menor impacto ambiental, como bicicletas, transporte p√∫blico, ve√≠culos el√©tricos e caminhadas.",
            "vantagens do transporte p√∫blico": "Reduz polui√ß√£o, tr√¢nsito e consumo de combust√≠vel, √© mais econ√¥mico e promove inclus√£o social.",
            "benef√≠cios da bicicleta": "N√£o polui, melhora a sa√∫de, √© econ√¥mica, reduz tr√¢nsito e contribui para cidades mais sustent√°veis.",
            
            # Perguntas sobre agricultura sustent√°vel
            "o que √© agricultura sustent√°vel": "√â um sistema de produ√ß√£o que mant√©m a produtividade, preserva o meio ambiente, √© economicamente vi√°vel e socialmente justa.",
            "pr√°ticas da agricultura sustent√°vel": "Rota√ß√£o de culturas, aduba√ß√£o org√¢nica, controle biol√≥gico de pragas, conserva√ß√£o da √°gua e preserva√ß√£o da biodiversidade.",
            "import√¢ncia da agricultura org√¢nica": "N√£o usa agrot√≥xicos, preserva solo e √°gua, produz alimentos mais saud√°veis e mant√©m a biodiversidade.",
            
            # Perguntas sobre educa√ß√£o ambiental
            "o que √© educa√ß√£o ambiental": "√â um processo que desenvolve consci√™ncia e conhecimento sobre quest√µes ambientais, promovendo mudan√ßas de atitude e comportamento.",
            "import√¢ncia da educa√ß√£o ambiental": "Forma cidad√£os conscientes, promove sustentabilidade, previne problemas ambientais e constr√≥i um futuro melhor para todos.",
            
            # Perguntas sobre desenvolvimento sustent√°vel
            "o que √© desenvolvimento sustent√°vel": "√â um modelo que atende √†s necessidades atuais sem comprometer a capacidade das futuras gera√ß√µes de atender √†s suas necessidades.",
            "pilares do desenvolvimento sustent√°vel": "Tr√™s pilares: ambiental (preserva√ß√£o), social (equidade) e econ√¥mico (viabilidade). Todos devem estar em equil√≠brio.",
            
            # Respostas de continua√ß√£o e complementares
            "muito interessante": "Que bom que achou interessante! A sustentabilidade √© realmente um tema fascinante. Tem alguma √°rea espec√≠fica que gostaria de saber mais?",
            "obrigado": "Por nada! Estou aqui para ajudar com informa√ß√µes sobre sustentabilidade. Tem mais alguma d√∫vida?",
            "legal": "Fico feliz que tenha gostado! Conhecimento sobre sustentabilidade √© fundamental para cuidarmos do nosso planeta. Posso ajudar com mais alguma coisa?",
            "interessante": "Sustentabilidade √© um assunto muito rico! Cada pequena a√ß√£o faz diferen√ßa para o meio ambiente. Quer saber sobre algum t√≥pico espec√≠fico?",
            "bacana": "√â mesmo! Quando entendemos mais sobre sustentabilidade, percebemos como podemos contribuir para um mundo melhor. Tem alguma pergunta espec√≠fica?",
            
            # Cumprimentos e intera√ß√µes b√°sicas
            "oi": "Ol√°! Sou o assistente virtual sobre Sustentabilidade e Meio Ambiente. Como posso ajud√°-lo hoje?",
            "ol√°": "Oi! Estou aqui para responder suas d√∫vidas sobre sustentabilidade, meio ambiente e pr√°ticas ecol√≥gicas. O que voc√™ gostaria de saber?",
            "bom dia": "Bom dia! Pronto para aprender sobre sustentabilidade? Posso ajud√°-lo com informa√ß√µes sobre meio ambiente, reciclagem, energia limpa e muito mais!",
            "boa tarde": "Boa tarde! Como posso auxili√°-lo com quest√µes sobre sustentabilidade e preserva√ß√£o ambiental hoje?",
            "boa noite": "Boa noite! Estou dispon√≠vel para esclarecer suas d√∫vidas sobre meio ambiente e sustentabilidade. Em que posso ajudar?",
            "tchau": "At√© logo! Lembre-se: pequenas a√ß√µes fazem grande diferen√ßa para o meio ambiente. Volte sempre que tiver d√∫vidas sobre sustentabilidade!",
            "at√© logo": "Tchau! Continue cuidando do nosso planeta. Estarei aqui sempre que precisar de informa√ß√µes sobre sustentabilidade!",
        }
        
        self.palavras_chave = {
            "aquecimento": ["aquecimento global", "o que √© aquecimento global", "como combater o aquecimento global"],
            "reciclagem": ["o que √© reciclagem", "como separar o lixo corretamente", "quais materiais podem ser reciclados"],
            "energia": ["o que s√£o energias renov√°veis", "vantagens da energia solar", "como economizar energia em casa"],
            "√°gua": ["como economizar √°gua", "import√¢ncia da √°gua", "o que √© polui√ß√£o da √°gua"],
            "desmatamento": ["o que causa o desmatamento", "consequ√™ncias do desmatamento", "como ajudar a preservar as florestas"],
            "polui√ß√£o": ["principais poluentes do ar", "como reduzir a polui√ß√£o do ar", "efeitos da polui√ß√£o do ar"],
            "consumo": ["o que √© consumo sustent√°vel", "como consumir de forma sustent√°vel", "o que s√£o produtos ecol√≥gicos"],
            "biodiversidade": ["o que √© biodiversidade", "por que preservar a biodiversidade", "como proteger a biodiversidade"],
            "clima": ["o que s√£o mudan√ßas clim√°ticas", "sinais das mudan√ßas clim√°ticas", "como se adaptar √†s mudan√ßas clim√°ticas"],
            "transporte": ["o que √© transporte sustent√°vel", "vantagens do transporte p√∫blico", "benef√≠cios da bicicleta"],
        }
        
    def processar_entrada(self, entrada):
        # Remove pontua√ß√£o e converte para min√∫sculas
        entrada_limpa = re.sub(r'[^\w\s]', '', entrada.lower())
        return entrada_limpa
    
    def encontrar_resposta(self, pergunta):
        pergunta_limpa = self.processar_entrada(pergunta)
        
        # Busca exata
        if pergunta_limpa in self.base_conhecimento:
            return self.base_conhecimento[pergunta_limpa]
        
        # Busca por palavras-chave
        for palavra_chave, perguntas_relacionadas in self.palavras_chave.items():
            if palavra_chave in pergunta_limpa:
                pergunta_sugerida = random.choice(perguntas_relacionadas)
                return f"Vejo que voc√™ est√° interessado em {palavra_chave}. {self.base_conhecimento[pergunta_sugerida]}"
        
        # Busca por similaridade
        perguntas_disponiveis = list(self.base_conhecimento.keys())
        correspondencias = get_close_matches(pergunta_limpa, perguntas_disponiveis, n=1, cutoff=0.6)
        
        if correspondencias:
            return self.base_conhecimento[correspondencias[0]]
        
        # Resposta padr√£o com sugest√µes
        sugestoes = [
            "reciclagem", "energia solar", "aquecimento global", 
            "economia de √°gua", "transporte sustent√°vel", "biodiversidade"
        ]
        sugestao = random.choice(sugestoes)
        
        return f"N√£o encontrei informa√ß√µes espec√≠ficas sobre isso. Que tal perguntarmos sobre {sugestao}? Ou voc√™ pode perguntar sobre: reciclagem, energia renov√°vel, mudan√ßas clim√°ticas, polui√ß√£o, desmatamento, consumo sustent√°vel, entre outros temas ambientais."
    
    def mostrar_menu(self):
        print("\n" + "="*60)
        print("üå± CHATBOT SUSTENTABILIDADE E MEIO AMBIENTE üå±")
        print("="*60)
        print("Ol√°! Sou seu assistente virtual especializado em sustentabilidade.")
        print("Posso responder perguntas sobre:")
        print("‚Ä¢ Aquecimento Global e Mudan√ßas Clim√°ticas")
        print("‚Ä¢ Reciclagem e Gest√£o de Res√≠duos") 
        print("‚Ä¢ Energias Renov√°veis")
        print("‚Ä¢ Economia de √Ågua")
        print("‚Ä¢ Desmatamento e Preserva√ß√£o")
        print("‚Ä¢ Polui√ß√£o do Ar")
        print("‚Ä¢ Consumo Sustent√°vel")
        print("‚Ä¢ Biodiversidade")
        print("‚Ä¢ Transporte Sustent√°vel")
        print("‚Ä¢ Agricultura Sustent√°vel")
        print("\nDigite 'sair' para encerrar o chat.")
        print("="*60)
    
    def executar(self):
        self.mostrar_menu()
        
        while True:
            pergunta = input("\nüí¨ Voc√™: ").strip()
            
            if not pergunta:
                print("ü§ñ Bot: Por favor, digite uma pergunta.")
                continue
                
            if pergunta.lower() in ['sair', 'exit', 'quit', 'bye']:
                print("ü§ñ Bot: Obrigado por usar o Chatbot Sustentabilidade! üåç")
                print("      Lembre-se: cada a√ß√£o conta para um planeta melhor! üå±")
                break
            
            resposta = self.encontrar_resposta(pergunta)
            print(f"ü§ñ Bot: {resposta}")

# Execu√ß√£o do programa
if __name__ == "__main__":
    chatbot = ChatbotSustentabilidade()
    chatbot.executar()
